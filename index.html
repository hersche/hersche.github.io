<!DOCTYPE html>
<html manifest="skamstergithubio.appcache">

<head>
    <meta charset='utf-8'>
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/jquery-migrate-1.2.1.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/ownScript.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <title>skamster.github.io</title>
    <script type="text/javascript">
        HTTP_GET_VARS = new Array();
        strGET = document.location.search.substr(1, document.location.search.length);
        if (strGET != '') {
            gArr = strGET.split('&');
            for (i = 0; i < gArr.length; ++i) {
                v = '';
                vArr = gArr[i].split('=');
                if (vArr.length > 1) {
                    v = vArr[1];
                }
                HTTP_GET_VARS[unescape(vArr[0])] = unescape(v);
            }
        }





        var lastName = "";
        var jData;
        var lang = window.navigator.userLanguage || window.navigator.language;
        if (lang.length == 5) {
            lang = lang.substr(0, 2);

        }
        var jsonFile = "en.json";

        $(document).ready(function() {
            if (GET('s') != 'undefined' & GET('s') != 'index') {
                lastName = GET('s');
            } else {
                lastName = "index";
            }
            if (lang == "de" & GET('lang') == 'undefined') {
                jsonFile = "de.json";
            }
            if (GET('lang') != 'undefined') {
                if (GET('lang') == "de" | GET('lang') == "en") {
                    jsonFile = GET('lang') + ".json";
                    updateContent();
                }
            }
            if (typeof(Storage) !== "undefined") {
                // Code for localStorage/sessionStorage.
                if (localStorage.jData) {
                    jData = jQuery.parseJSON(localStorage.jData);
                    $("#showContent").html(processHtml(jData, lastName));
                } else {
                    //retrive
                    $.getJSON(jsonFile)
                        .done(function(data) {
                            localStorage.jData = JSON.stringify(data);
                            jData = data;
                            $("#showContent").html(processHtml(jData, lastName));
                        })
                        .fail(function(jqxhr, textStatus, error) {
                            alert("(with webstorage) Request failed: " + error+textStatus+jqxhr);
                            console.log("Request Failed: " + error+textStatus+jqxhr);
                        });
                }
            } else {
                // Sorry! No Web Storage support..
                $.getJSON(jsonFile)
                    .done(function(data) {
                        jData = jQuery.parseJSON(JSON.stringify(data));
                        $("#showContent").html(processHtml(jData, lastName));
                    })
                    .fail(function(jqxhr, textStatus, error) {
                        alert("(withouth webstorage) Request failed: " + error+textStatus+jqxhr);
                        console.log("Request Failed: " + error+textStatus+jqxhr);
                    });

            }
            $("#showContent").fadeIn(1000);
            $("#menu").fadeIn(1000);
        });

        function changeContent(name) {
            if (history.pushState) {
                history.pushState({
                    "id": 100
                }, "skamster.github.io::" + name, "index.html?s=" + name);
            }
            if (name != lastName) {
                $("#animationContainer").effect("slide", {
                    "direction": "left",
                    "mode": "hide"
                }, 400, function() {
                    $("#showContent").html(processHtml(jData, name));

                });

                $("#animationContainer").effect("slide", {
                    "direction": "right",
                    "mode": "show"
                }, 400);
                lastName = name;
            }

            return false;
        }
    </script>
</head>

<body>
    <header>
        <div class="container" style="display: none;" id="menu">
            <div id="menucontent">
                <h1>skamster.github.io</h1>
                <section id="downloads">
                    <a style="margin-left:5px;" href="index.html?s=index" onclick="changeContent('index'); return false" class="btn fade">Home</a>
                    <a href="index.html?s=about" onclick="changeContent('about'); return false" class="btn fade">About me</a>
                    <a target="_blank" href="https://github.com/skamster" class="btn btn-github fade">
                        <span class="icon"></span>View on GitHub</a>
                    <a style="float:right;" href="#" onclick="updateContent(); return false" class="btn fade">Refresh</a>
                    <a style="float:right;" href="index.html?lang=de" class="btn fade">DE</a>
                    <a style="float:right;" href="index.html?lang=en" class="btn fade">ENG</a>
                </section>
            </div>
        </div>
    </header>
    <div id="animationContainer">
        <div id="showContent" style="display: none"></div>
    </div>

</body>

</html>